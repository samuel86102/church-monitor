<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<title>VDO Ninja 監看v2</title>

<style>
  html, body {
    margin: 0;
    height: 100%;
    background: black;
    overflow: hidden;
    font-family: sans-serif;
  }

  #toolbar {
    position: fixed;
    top: 10px;
    left: 10px;
    z-index: 1000;
  }

  button {
    margin-right: 5px;
    padding: 6px 10px;
    cursor: pointer;
  }

  #container {
    width: 100%;
    height: 100%;
    display: flex;
  }

  .view {
    position: relative;
    flex: 1;
    border: 1px solid #222;
  }

  iframe {
    width: 100%;
    height: 100%;
    border: none;
    background: black;
  }

  /* 子母畫面 */
  #pip {
    position: absolute;
    width: 30%;
    height: 30%;
    right: 20px;
    bottom: 20px;
    z-index: 10;
    cursor: move;
    resize: both;
    overflow: hidden;
    border: 2px solid #555;
  }

  #pip.dragging iframe {
    pointer-events: none;
  }

</style>
</head>

<body>

<div id="toolbar">
  <button onclick="layoutLR()">左右</button>
  <button onclick="layoutTB()">上下</button>
  <button onclick="layoutPIP()">子母</button>
  <button onclick="switchCams()">切換</button>
</div>

<div id="container">
  <div class="view" id="main">
    <iframe id="cam1" src="https://vdo.ninja/?view=BUd8zc4&cleanoutput&mute"></iframe>
  </div>

  <div class="view" id="second">
    <iframe id="cam2" src="https://vdo.ninja/?view=Lz5qHhz&cleanoutput&mute"></iframe>
  </div>
</div>

<script>
  const container = document.getElementById('container');
  const main = document.getElementById('main');
  const second = document.getElementById('second');
  const cam1 = document.getElementById('cam1');
  const cam2 = document.getElementById('cam2');

  function layoutLR() {
    container.style.flexDirection = 'row';
    main.style.display = 'block';
    second.style.position = 'relative';
    second.style.width = '50%';
    second.style.height = '100%';
    second.id = 'second';
  }

  function layoutTB() {
    container.style.flexDirection = 'column';
    main.style.display = 'block';
    second.style.position = 'relative';
    second.style.width = '100%';
    second.style.height = '50%';
    second.id = 'second';
  }

  function layoutPIP() {
    container.style.flexDirection = 'row';
    main.style.display = 'block';
    second.id = 'pip';
    second.style.position = 'absolute';
    second.style.width = '30%';
    second.style.height = '30%';
    second.style.transform = ''; // reset transform
    second.style.left = '';
    second.style.top = '';
    second.style.right = '20px';
    second.style.bottom = '20px';
  }

  function switchCams() {
    const src1 = cam1.src;
    cam1.src = cam2.src;
    cam2.src = src1;
  }

  /* 拖拉子母畫面 */
  let isDragging = false;
  let startX = 0;
  let startY = 0;
  let startLeft = 0;
  let startTop = 0;

  second.addEventListener('mousedown', e => {
    if (second.id !== 'pip') return;
    isDragging = true;
    second.classList.add('dragging');
    
    startX = e.clientX;
    startY = e.clientY;
    
    const rect = second.getBoundingClientRect();
    startLeft = rect.left;
    startTop = rect.top;
    
    second.style.right = '';
    second.style.bottom = '';
    second.style.left = startLeft + 'px';
    second.style.top = startTop + 'px';
    
    e.preventDefault(); // 防止文字選取
  });

  window.addEventListener('mousemove', e => {
    if (!isDragging) return;
    
    const dx = e.clientX - startX;
    const dy = e.clientY - startY;
    
    second.style.transform = `translate(${dx}px, ${dy}px)`;
  });

  window.addEventListener('mouseup', e => {
    if (!isDragging) return;
    isDragging = false;
    second.classList.remove('dragging');
    
    const dx = e.clientX - startX;
    const dy = e.clientY - startY;

    second.style.transform = '';
    second.style.left = (startLeft + dx) + 'px';
    second.style.top = (startTop + dy) + 'px';
  });
</script>

</body>
</html>

